///////////////////////////////////////////////////////////////////////////
// Precompilled headers
///////////////////////////////////////////////////////////////////////////
#include <pch.hpp>

///////////////////////////////////////////////////////////////////////////
// Headers
///////////////////////////////////////////////////////////////////////////
#include <Vksb/Event/MouseMoved.hpp>
#include <Vksb/Component/Control.hpp>
#include <Vksb/Configuration.hpp>
#include <Vksb/AScene.hpp>


///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Constructors
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
::vksb::event::MouseMoved::MouseMoved(
    ::glm::vec2 position
)
    : m_offset{ position.x, position.y }
{
}

///////////////////////////////////////////////////////////////////////////
::vksb::event::MouseMoved::MouseMoved(
    float positionX,
    float positionY
)
    : m_offset{ positionX, positionY }
{
}

///////////////////////////////////////////////////////////////////////////
::vksb::event::MouseMoved::MouseMoved(
    double positionX,
    double positionY
)
    : m_offset{
        static_cast<float>(positionX),
        static_cast<float>(positionY)
    }
{
}



///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Resolve
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
void ::vksb::event::MouseMoved::resolve(
    ::vksb::AScene& scene
)
{
    auto& playerController{ scene.getPlayerComponent<::vksb::component::Control>() };

    playerController.rotateX(-m_offset.x);
    playerController.rotateY(m_offset.y);
}
